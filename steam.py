"""
This is a Python script that serves as a frontend for a conversational AI model built with the `langchain` and `llms` libraries.
The code creates a web application using Streamlit, a Python library for building interactive web apps.
# Author: Avratanu Biswas
# Date: March 11, 2023
"""

# Import necessary libraries
import streamlit as st
from langchain.chains import ConversationChain
from langchain.chains.conversation.memory import ConversationEntityMemory
from langchain.chains.conversation.prompt import ENTITY_MEMORY_CONVERSATION_TEMPLATE
from langchain.llms import OpenAI

# Set Streamlit page configuration
st.set_page_config(page_title='ü§ñ Bud Bot üç∫', layout='wide')
# Initialize session states
if "generated" not in st.session_state:
    st.session_state["generated"] = []
if "past" not in st.session_state:
    st.session_state["past"] = []
if "input" not in st.session_state:
    st.session_state["input"] = ""
if "stored_session" not in st.session_state:
    st.session_state["stored_session"] = []

# Define function to get user input
def get_text():
    """
    Get the user input text.

    Returns:
        (str): The text entered by the user
    """
    input_text = st.text_input("You: ", st.session_state["input"], key="input",
                            placeholder="Your AI assistant here! Ask me anything ...", 
                            label_visibility='hidden')
    return input_text

# Define function to start a new chat
def new_chat():
    """
    Clears session state and starts a new chat.
    """
    save = []
    for i in range(len(st.session_state['generated'])-1, -1, -1):
        save.append("User:" + st.session_state["past"][i])
        save.append("Bot:" + st.session_state["generated"][i])        
    st.session_state["stored_session"].append(save)
    st.session_state["generated"] = []
    st.session_state["past"] = []
    st.session_state["input"] = ""
    st.session_state.entity_memory.store = {}
    st.session_state.entity_memory.buffer.clear()

# Set up sidebar with various options
st.sidebar.markdown('''
    <img style="margin: 0 0 2em 0.5em" src="data:image/png;base64,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" />
    ''', unsafe_allow_html=True)

with st.sidebar.expander("üõ†Ô∏è ", expanded=False):
    MODEL = st.selectbox(label='Model', options=['gpt-3.5-turbo','cci-trained'])
    K = st.number_input(' (#)Summary of prompts to consider',min_value=3,max_value=1000)

# Set up the Streamlit app layout
st.title("ü§ñ Bud Bot üç∫")


# Ask the user to enter their OpenAI API key
API_O = st.sidebar.text_input("API-KEY", type="password")

# Session state storage would be ideal
if API_O:
    # Create an OpenAI instance
    llm = OpenAI(temperature=0,
                openai_api_key=API_O, 
                model_name=MODEL, 
                verbose=False) 


    # Create a ConversationEntityMemory object if not already created
    if 'entity_memory' not in st.session_state:
            st.session_state.entity_memory = ConversationEntityMemory(llm=llm, k=K )
        
        # Create the ConversationChain object with the specified configuration
    Conversation = ConversationChain(
            llm=llm, 
            prompt=ENTITY_MEMORY_CONVERSATION_TEMPLATE,
            memory=st.session_state.entity_memory
        )  
else:
    st.sidebar.warning('API key required to try this app.The API key is not stored in any form.')
    # st.stop()


# Add a button to start a new chat
st.sidebar.button("New Chat", on_click = new_chat, type='primary')

# Get the user input
user_input = get_text()

# Generate the output using the ConversationChain object and the user input, and add the input/output to the session
if user_input:
    output = Conversation.run(input=user_input)  
    st.session_state.past.append(user_input)  
    st.session_state.generated.append(output)  

# Allow to download as well
download_str = []
# Display the conversation history using an expander, and allow the user to download it
with st.expander("Conversation", expanded=True):
    for i in range(len(st.session_state['generated'])-1, -1, -1):
        st.info(st.session_state["past"][i],icon="üßê")
        st.success(st.session_state["generated"][i], icon="ü§ñ")
        download_str.append(st.session_state["past"][i])
        download_str.append(st.session_state["generated"][i])
    
    # Can throw error - requires fix
    download_str = '\n'.join(download_str)
    if download_str:
        st.download_button('Download',download_str)

# Display stored conversation sessions in the sidebar
for i, sublist in enumerate(st.session_state.stored_session):
        with st.sidebar.expander(label= f"Conversation-Session:{i}"):
            st.write(sublist)

# Allow the user to clear all stored conversation sessions
if st.session_state.stored_session:   
    if st.sidebar.checkbox("Clear-all"):
        del st.session_state.stored_session